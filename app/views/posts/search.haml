= render 'search/breadcrumbs'

.search-collapsible
  .search-params-header
    Search Posts
    - if @search_results
      = '- ' + @search_results.total_entries.to_s + ' results'
  .search-results-header
    - if @search_results
      = render 'paginator', paginated: @search_results
  .search-box
    = form_tag search_posts_path, method: :get do
      .search-form#posts-search
        .label= label_tag :board_id, 'Continuity'
        .select= select_tag :board_id, options_from_collection_for_select(@board || [], :id, :name, params[:board_id]), class: 'chosen-select', prompt: '— Choose Continuity —'
        .label= label_tag :author_id, 'Author'
        .select= select_tag :author_id, options_from_collection_for_select(@user || [], :id, :username, params[:author_id]), class: 'chosen-select', prompt: '— Choose Author —', multiple: true
        .label= label_tag :character_id, 'Character'
        .select= select_tag :character_id, options_from_collection_for_select(@character || [], :id, :selector_name, params[:character_id]), prompt: '— Choose Character —'
        .label= label_tag :setting_id, 'Setting'
        .select= select_tag :setting_id, options_from_collection_for_select(@setting || [], :id, :name, params[:setting_id]), prompt: '— Choose Setting —'
        .label= label_tag :subject, 'Subject'
        .select= text_field_tag :subject, params[:subject]
        .label Acronym
        .select.checkbox-field
          = check_box_tag :abbrev, true, params[:abbrev].present?
          = label_tag :abbrev, 'Search for acronym'
        .label Completed
        .select.checkbox-field
          = check_box_tag :completed, true, params[:completed].present?
          = label_tag :completed, "Completed Only"
        .search-form-ender= submit_tag "Search", class: 'button'
  .vtop#search_results
    - if @search_results.present?
      %table
        %thead
          %tr
            %th.sub
            %th.sub Thread
            %th.sub Continuity
            %th.sub Authors
            %th.sub Replies
            %th.sub Last Updated
        %tbody
          = render partial: 'posts/list_item', collection: @search_results, as: :post
  - if @search_results && @search_results.total_pages > 1
    .search-params-header.empty
    .search-results-header= render 'paginator', paginated: @search_results
